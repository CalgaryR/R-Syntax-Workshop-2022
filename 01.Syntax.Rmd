---
title: "R Syntax"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
knitr::opts_chunk$set(echo = FALSE)
```

<!-- ======================== -->
## Basic Instructions
<!-- ======================== -->

Start in order with every section. A check mark will appear to the left of each section main header when you have completed the executing of the code or answered the questions, in the case of quizes.

If you want to restart the whole document erasing all of your previous history press the `Start Over` button on the left pane. Closing and reopening the document will restore all of your previous answers up to the point where you last closed it.

After completing all the exercises and questions under a topic a bar on the left of the main topic will indicate that you have completed it.

Let's get started.

<!-- ======================== -->
## R as a calculator
<!-- ======================== -->

R has a console to interact with it. Let's use it as a calculator to add two numbers. 

Run the line of code to add two plus two:

```{r two-plus-two, exercise=TRUE}
2 + 2
```

Note the output, there is a [1] and the result of the calculation. We will address the meaning of the number between square brackets shortly. For now pretend it tells you the position of the single answer provided: a `[1]` indicates that the number `4` is the first value in the answer.

### Mathematical operators in R

Please try running the following lines of code representing mathematical  operations.

```{r operators-1, exercise=TRUE}
450 - 100
3 * 10
35 / 7
5^2
```

Each result appears on its own line after running the code. This is the same behaviour you would see on a command line if you entererd the four lines of code.

### Operator precedence

Operators that act on a single value are _unary_ while those that receive two arguments are _binary_. The execution order of an expression containing several operators follows the rules of operator precedence that give more or less priority to some operators over others. Compare the following two lines:

```{r op-precendence, exercise=TRUE}
1 + 5 * 5
(1 + 5) * 5
```

Multiplication takes precendence over addition when the first line is evaluated. The use of parenthesis forces the addition to be carried out before the final multiplication by `5` on the second line.

From the R help here is a list of all the unary and binary operators and their precedence from highest to lowest from top to bottom and from left to right within groups:

```{r op-precedence-2, results='asis'}
library(knitr)
kable(data.frame(operator_groups = c(":: :::",
                               "$ @",
                               "[ [[",
                               "^",
                               "- +",
                               ":",
                               "%any%",
                               "* /",
                               "+ -",
                               "< > <= >= == !=",
                               "!",
                               "& &&",
                               "| ||",
                               "~",
                               "-> ->>",
                               "<- <<-",
                               "=",
                               "?"),
description = c("access variables in a namespace",
                "component / slot extraction",
                "indexing",
                "exponentiation (right to left)",
                "unary minus and plus",
                "sequence operator",
                "special operators (including %% and %/%)",
                "multiply, divide",
                "(binary) add, subtract",
                "ordering and comparison",
                "negation",
                "and",
                "or",
                "as in formulae",
                "rightwards assignment",
                "assignment (right to left)",
                "assignment (right to left)",
                "help (unary and binary)")))
```

You can get documentation like this from the R help at the comamnd line by typing `?Syntax` or `help("Syntax")`, note the double quotes in the second comamnd. 

### Storing values in variables

It's a good idea to store results in variables so we can keep them around and do additional operations with them in other expressions.

```{r storing-values, exercise=TRUE}
a <- 10
b <- a + 10
```

The _<-_ binary operator indicates assignment. The value on the right is assigned to the variable on the left. After line 1 is executed by R the variable `a` stores the value 10 so when the second line is executed b is assigned he result of applying the operator `+` to the value `10` and the value of the variable `a`. As a result of all this `b` will be assigned the value `20`.

### Built-in functions

R offers some expressions that take arguments given by the user and return computed values when executed. Let's look at the result of running the following lines:

```{r executing-function, exercise=TRUE}
e <- exp(1)
e
```

The value stored in the variable `e` gets printed as `2.718282` when we run the second line with the expression `e`, as expected. Try running the line 1 by itself by deleting the second line and re-running the code. There should be no output. The value of the function `exp` with the argument `1` was computed and stored in the variable called `e`. The assignment operation leaves no trace on the output.

### Other built-in functions

To compute logarithms, R offers the following predefined functions:

```
     log(x, base = exp(1))
     logb(x, base = exp(1))
     log10(x)
     log2(x)
     
     log1p(x)
```

Experiment now to compute logarithms in base 10 and natural logarithms (base _e_). Try to answer the following: 

 - What is the logarithm of 10 in base 10?
 - What is the natural logarithm of _e_?
 - What is the logarithm of 512 in base 2?
 
Try using the two variables already predefined in the first two lines. Add as many lines of code as you need to experiment.

```{r other-operators, exercise=TRUE, exercise.lines=5}
a <- 10
e <- exp(1)
```

To see all the predefined functions available in the base package type `library(help = "base)` at the command line.

```{r functions-base-package, exercise=TRUE}
library(help = "base")
```

<!-- ======================== -->
## Quiz 1
<!-- ======================== -->

```
a <- 1 + log10(10)
```


```{r quiz-1-a, echo=FALSE, cache=FALSE}
quiz(
  question("What is the result of executing the line above on the R console?",
    answer("the value 2 gets assigned to _a_ and printed to the console", message = "the operaror _assignment_ has no side effects so nothing should be printed to the console"),
    answer("error, _log10_ of 10 is undefined", message = "That's not quite right, check your the definition of a logarithm and try again"),
    answer("nothing gets printed", correct = TRUE, message = "The operator _assignemnt_ has no side effects so nothing gest printed after the value 2 gets associated with the variable _a_"),
    answer("the value of _a_ gets printed", message = "The operator _assignment_ has no other effect than to associate a value with a variable name"),
    allow_retry = TRUE,
    random_answer_order = TRUE
  ),
  question("What is the result of 10 - 6 / 2",
    answer("2", message = "division has precedence over subtraction"),
    answer("7", correct = TRUE, message = "division has higher precedence than subtraction"),
    answer("8", message = "Good try, redo the calculation"),
    answer("-4"),
  allow_retry = TRUE,
  random_answer_order = TRUE    
  ))
```

```
a <- 5
b <- a * (34 - 22) / 1 + 1
```

```{r quiz-1-c, echo=FALSE, cache=FALSE}
quiz(
  question("What is the value of b afteer executing the R code above?",
  answer("12"),
  answer("30"),
  answer("61", correct = TRUE),
  answer("149"),
  allow_retry = TRUE,
  random_answer_order = TRUE,
  try_again = "Check the operator precedence table and try again."
))
```



<!-- Every computing language uses a model to represent information in memory. R is no exception.  -->

<!-- Everything in R is an object with a default constructor. -->
<!-- There are two types of data structures according to what they data types they can store: homogeneous and heterogeneous. They can also be categorized according to the dimensions they can store: 1d, 2d or nd. -->

<!-- *The first homogeneous 1d structure is an atomic vector.* -->

<!-- ### Exercise with Code -->

<!-- *Here's an exercise with some prepopulated code as well as `exercise.lines = 5` to provide a bit more initial room to work.* -->

<!-- Now write a function that adds any two numbers and then call it: -->

<!-- ```{r add-function, exercise=TRUE, exercise.lines = 5} -->
<!-- add <- function() { -->

<!-- } -->
<!-- ``` -->

## Topic 2

### Exercise with Hint

*Here's an exercise where the chunk is pre-evaulated via the `exercise.eval` option (so the user can see the default output we'd like them to customize). We also add a "hint" to the correct solution via the chunk immediate below labeled `print-limit-hint`.*

Modify the following code to limit the number of rows printed to 5:

```{r print-limit, exercise=TRUE, exercise.eval=TRUE}
mtcars
```

```{r print-limit-hint}
head(mtcars)
```

### Quiz

*You can include any number of single or multiple choice questions as a quiz. Use the `question` function to define a question and the `quiz` function for grouping multiple questions together.*



